# Test info

- Name: Script & Page Distribution >> Full Script >> verify upload fullScript document
- Location: /Users/babuyadav/Documents/zillit-playwright-automation/src/tests/scriptDistributionTest.spec.js:28:5

# Error details

```
Error: locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator('//div[@id="scriptFooter"]//button')

    at ScriptDistribution.uploadScriptDistribution (/Users/babuyadav/Documents/zillit-playwright-automation/src/pages/script-page-distribution.js:54:27)
    at /Users/babuyadav/Documents/zillit-playwright-automation/src/tests/scriptDistributionTest.spec.js:30:36
```

# Page snapshot

```yaml
- complementary:
  - img "Zillit Logo"
  - img
  - paragraph: Turn on Notification
  - paragraph: Get notified of a new message or call on computer.
  - button "Turn on desktop notification"
  - menu:
    - menuitem "FilmTools Logo Home":
      - img "FilmTools Logo"
      - text: Home
    - menuitem "Email":
      - img
      - text: Email
    - menuitem "FilmTools Logo Tools":
      - img "FilmTools Logo"
      - text: Tools
    - menuitem "FilmTools Logo C & C":
      - img "FilmTools Logo"
      - text: C & C
    - menuitem "FilmTools Logo Settings":
      - img "FilmTools Logo"
      - text: Settings
    - menuitem "FilmTools Logo SOS":
      - img "FilmTools Logo"
      - text: SOS
    - menuitem "question Zillit Help":
      - img "question"
      - text: Zillit Help
    - menuitem "poweroff Logout":
      - img "poweroff"
      - text: Logout
  - img "user"
  - button "Zl automation51 down":
    - strong: Zl automation51
    - img "down"
  - superscript
- main:
  - button "arrow-left Back":
    - img "arrow-left"
    - text: Back
  - text: Script & Pages Distribution
  - tablist:
    - tab "Full Script" [selected]
    - tab "Pages"
  - tabpanel "Full Script"
  - img "user"
  - paragraph: "Episode : 99"
  - paragraph: "Uploaded By : Babu Web (Caterers)"
  - button "More +"
  - text: "Uploaded On: Jul 30, 2025 at 05:12 PM"
  - button "history":
    - img "history"
```

# Test source

```ts
   1 | import { expect } from '@playwright/test';
   2 | import { loadJson } from '../utils/jsonUtil';
   3 | const mediapaths = loadJson('mediapaths', 'testdata');
   4 |
   5 | export default class ScriptDistribution {
   6 |
   7 |     constructor(page){
   8 |         this.page = page;
   9 |
   10 |         this.tools = page.locator('//span[@class="ant-menu-title-content"]//span[text()="Tools"]');
   11 |         this.fullScript = page.locator('//div[@class="ant-tabs-tab-btn"]//span[text()="Full Script"]');
   12 |         this.pages = page.locator('//div[@class="ant-tabs-tab-btn"]//span[text()="Pages"]');
   13 |
   14 |         /**
   15 |          * upload documents locators
   16 |          */
   17 |         this.attachment = page.locator('//div[@id="scriptFooter"]//button');
   18 |         this.documentUpload = page.locator("//div[text()='Document Upload']/ancestor::span[contains(@class, 'ant-upload')]//input[@type='file']");
   19 |         this.send = page.locator('#upload_document_send_script_button');
   20 |
   21 |         /**
   22 |          * FullScript & Page locators
   23 |          */
   24 |         this.enterEpisodeNumber = page.locator('#episodeNo');
   25 |         this.enterSceneNumber = page.locator('#sceneNumber');
   26 |
   27 |         /**
   28 |          * FullScript & Page more button locators
   29 |          */
   30 |         this.moreButton = page.locator('#script_distribution_more_button');
   31 |         this.viewButton = page.locator('#script_distribution_more_view_button');
   32 |         this.viewCountButton = page.locator('#script_distribution_more_view_count_button');
   33 |         this.replaceButton = page.locator('#script_distribution_more_replace_button');
   34 |         this.downloadButton = page.locator('#script_distribution_more_download_button');
   35 |         this.downloadCountButton = page.locator('#script_distribution_more_download_count_button');
   36 |         this.deleteButton = page.locator('#script_distribution_more_delete_button');
   37 |         this.yesButtonForDeletion = page.locator('//div[@class="ant-popconfirm-buttons"]//button//span[text()="Yes"]')
   38 |         this.close = page.locator('#close_document_viewer_button');
   39 |         this.closeIcon = page.locator('//button[@aria-label="Close"]');
   40 |
   41 |         /**
   42 |          * Folder & other locators
   43 |          */
   44 |         this.folder = page.locator('//img[@alt="Folder Icon"]');
   45 |
   46 |     }
   47 |
   48 |
   49 |     async scriptDistributionTab(){
   50 |         await this.tools.click();
   51 |         await this.page.locator('div.ant-card-body').getByText('Script & Pages Distribution').click();
   52 |     }
   53 |
>  54 |     async fullScriptTab(){
      |                           ^ Error: locator.click: Target page, context or browser has been closed
   55 |         await this.fullScript.click();
   56 |     }
   57 |
   58 |     async pageTab(){
   59 |         await this.pages.click();
   60 |     }
   61 |
   62 |
   63 |     async uploadScriptDistribution(enterEpisode, enterScene){
   64 |         await this.attachment.click();
   65 |         await this.documentUpload.setInputFiles(mediapaths.document);
   66 |
   67 |         if(enterEpisode=='Episode'){
   68 |             await this.enterEpisodeNumber.fill('99'); 
   69 |         }  
   70 |         if(enterScene=='Scene'){
   71 |             await this.enterSceneNumber.fill('55'); 
   72 |         } 
   73 |         await this.send.click();
   74 |     }
   75 |
   76 |
   77 |     async verifyPopUpMessage(popup){
   78 |         try{
   79 |             const successMsg = await this.page.locator(`text=${popup}`);
   80 |             await successMsg.waitFor({ state: 'visible', timeout: 15000 });
   81 |             await successMsg.waitFor({ state: 'hidden', timeout: 15000 });
   82 |         } catch(error){
   83 |             console.log('Not show the success pop up message', error.message);
   84 |         }
   85 |     }
   86 |
   87 |
   88 |     /**
   89 |      * more button action: view → viewCount → download → downloadCount → move → delete
   90 |      */
   91 |
   92 |     async view(){
   93 |         await this.moreButton.click();
   94 |         await this.viewButton.click();
   95 |         await this.close.click();
   96 |     }
   97 |
   98 |     async viewCount(tabName){
   99 |         await this.moreButton.click();
  100 |         await this.viewCountButton.click();
  101 |
  102 |         if(tabName == 'scriptFull'){
  103 |             await this.closeIcon.click();
  104 |         }
  105 |
  106 |         if(tabName == 'pages'){
  107 |             await this.closeIcon.nth(2).click();
  108 |         }         
  109 |     }
  110 |
  111 |     async viewCountForPage(){
  112 |         await this.moreButton.click();
  113 |         await this.viewCountButton.click();
  114 |         await this.closeIcon.nth(1).click();
  115 |     }
  116 |
  117 |
  118 |     async download(){
  119 |         await this.moreButton.click();
  120 |         await this.downloadButton.click();
  121 |     }
  122 |
  123 |     async downloadCount(tabName){
  124 |         await this.moreButton.click();
  125 |         await this.downloadCountButton.click();
  126 |
  127 |         if(tabName == 'scriptFull'){
  128 |             await this.closeIcon.click();
  129 |         }
  130 |
  131 |         if(tabName == 'pages'){
  132 |             await this.closeIcon.nth(2).click();
  133 |         }
  134 |     }
  135 |
  136 |     async downloadCountForPages(){
  137 |         await this.moreButton.click();
  138 |         await this.downloadCountButton.click();
  139 |         await this.closeIcon.nth(1).click();
  140 |     }
  141 |
  142 |
  143 |     async delete(){
  144 |         await this.moreButton.click();
  145 |         await this.deleteButton.click();
  146 |         await this.yesButtonForDeletion.click();
  147 |     }
  148 |
  149 |
  150 |     async clickPageFolder(){
  151 |         const count = await this.folder.count();
  152 |
  153 |         if(count ==1){
  154 |             await this.folder.click();
```